{% extends "base.html" %}

{% block extra_head %}
<script>
function updatePlayers() {
  const numInput = document.getElementById("num_players");
  const n = parseInt(numInput.value || "0");
  const area = document.getElementById("player_area");
  area.innerHTML = "";

  if (n < 2 || n > 10) {
    area.innerHTML = '<p class="text-xs text-red-400 mt-1">í”Œë ˆì´ì–´ ìˆ˜ëŠ” 2~10ëª… ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>';
    return;
  }

  for (let i = 0; i < n; i++) {
    const wrapper = document.createElement("div");
    wrapper.className = "mt-2";
    wrapper.innerHTML = `
      <label class="text-xs font-semibold text-slate-200">í”Œë ˆì´ì–´ ${i+1} ì´ë¦„</label>
      <input type="text" name="name_${i}"
             placeholder="í”Œë ˆì´ì–´${i+1}"
             class="mt-1 w-full rounded-lg border border-slate-600 bg-slate-900/60 px-3 py-1.5 text-sm text-slate-50 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-arcadeNeon focus:border-transparent" />
    `;
    area.appendChild(wrapper);
  }
}

window.addEventListener("DOMContentLoaded", updatePlayers);
</script>
{% endblock %}

{% block content %}

<h2 class="text-lg sm:text-xl font-semibold text-slate-50 flex items-center gap-2">
  <span class="inline-block w-2 h-5 bg-arcadeNeon rounded-full"></span>
  ì‚¬ë‹¤ë¦¬ ê²Œì„ ì„¤ì •
</h2>
<p class="mt-1 text-xs sm:text-sm text-slate-300">
  íŒ€ì› ì´ë¦„ê³¼ ë²Œì¹™/ìƒí’ˆì„ ì…ë ¥í•˜ë©´, ì•„ì¼€ì´ë“œ ì‚¬ë‹¤ë¦¬ê°€ ê³µì •í•˜ê²Œ ê²°ê³¼ë¥¼ ì •í•´ì¤ë‹ˆë‹¤ ğŸ®
</p>

{% if error %}
<div class="mt-3 rounded-lg border border-red-500/60 bg-red-900/40 px-3 py-2 text-xs text-red-100">
  {{ error }}
</div>
{% endif %}

<form method="post" class="mt-4 space-y-4">
  <!-- í”Œë ˆì´ì–´ ìˆ˜ -->
  <div>
    <label for="num_players" class="text-xs font-semibold text-slate-200">í”Œë ˆì´ì–´ ìˆ˜ (2~10ëª…)</label>
    <input id="num_players" name="num_players" type="number" min="2" max="10" value="4"
           oninput="updatePlayers()" onchange="updatePlayers()"
           class="mt-1 w-28 rounded-lg border border-slate-600 bg-slate-900/60 px-3 py-1.5 text-sm text-slate-50 focus:outline-none focus:ring-2 focus:ring-arcadeNeon focus:border-transparent" />
    <div id="player_area" class="grid sm:grid-cols-2 gap-x-6"></div>
  </div>

  <!-- ë²Œì¹™ / ìƒí’ˆ -->
  <div>
    <label for="rewards" class="text-xs font-semibold text-slate-200">ë²Œì¹™ / ìƒí’ˆ ëª©ë¡ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
    <textarea id="rewards" name="rewards" rows="3"
              placeholder="ì˜ˆ) ì»¤í”¼ ì˜ê¸°, ê°„ì‹ ì‚¬ì˜¤ê¸°"
              class="mt-1 w-full rounded-lg border border-slate-600 bg-slate-900/60 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-arcadeNeon focus:border-transparent"></textarea>
    <p class="mt-1 text-[11px] text-slate-400 leading-snug">
      Â· ë²Œì¹™/ìƒí’ˆì€ 1ê°œ ì´ìƒ, í”Œë ˆì´ì–´ ìˆ˜ ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.<br>
      Â· ì…ë ¥í•œ ë²Œì¹™/ìƒí’ˆ ê°œìˆ˜ë§Œí¼ì€ ë°˜ë“œì‹œ ëˆ„êµ°ê°€ ë‹¹ì²¨ë˜ë©°, <span class="text-arcadeNeon font-semibold">ì¤‘ë³µ ë‹¹ì²¨ì€ ì—†ìŠµë‹ˆë‹¤.</span><br>
      Â· ë‚˜ë¨¸ì§€ í”Œë ˆì´ì–´ëŠ” ìë™ìœ¼ë¡œ <span class="italic">'ê½'</span> ì²˜ë¦¬ë©ë‹ˆë‹¤.
    </p>
  </div>

  <!-- ë²„íŠ¼ -->
  <div class="pt-2 flex flex-wrap gap-2">
    <button type="submit"
            class="btn btn-primary bg-arcadeNeon text-slate-900 px-4 py-1.5 rounded-full text-sm font-semibold shadow-lg shadow-arcadeNeon/30 hover:bg-emerald-400">
      ì‚¬ë‹¤ë¦¬ ì‹œì‘!
    </button>
    <button type="reset"
            class="btn btn-secondary bg-slate-700/70 text-slate-100 px-4 py-1.5 rounded-full text-sm hover:bg-slate-600"
            onclick="setTimeout(updatePlayers,0)">
      ì´ˆê¸°í™”
    </button>
  </div>
</form>

{% endblock %}
